% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/time_to_event_functions.R
\name{median_time_to_event}
\alias{median_time_to_event}
\title{Calculate Median Time to Event for a Specific State}
\usage{
median_time_to_event(
  survfitms_obj,
  evt_type = 1,
  subgroup = NULL,
  target_prob = 0.5,
  interpolate = TRUE
)
}
\arguments{
\item{survfitms_obj}{A \code{survfitms} object from the \pkg{mstate} package,
representing a fitted multi-state survival model.}

\item{evt_type}{Integer; the event type of interest (default = 1).}

\item{subgroup}{Optional character string specifying a subgroup  name
within the \code{survfitms_obj}.}

\item{target_prob}{Numeric value between 0 and 1 indicating the
cumulative incidence probability. When 0.5 will calculate the median time.
Default is \code{0.5}.}

\item{interpolate}{Logical indicating whether to use linear interpolation
between time points for more accurate estimates. Default is \code{TRUE}.}
}
\value{
A list of class \code{"time_estimate"} containing:
\describe{
  \item{time}{Estimated time to reach \code{target_prob}.}
  \item{lower_ci}{Lower confidence interval for the median time (if available).}
  \item{upper_ci}{Upper confidence interval for the median time (if available).}
  \item{target_probability}{The target cumulative incidence probability}
  \item{max_followup}{Maximum observed follow-up time.}
  \item{final_cif}{Final cumulative incidence at last time point.}
  \item{n_at_risk}{Number at risk at time zero for the specified state.}
  \item{n_events}{Number of transitions into the specified state.}
  \item{interpolated}{Logical indicating if interpolation was used.}
  \item{error}{Error message if calculation failed (otherwise \code{NULL}).}
}
}
\description{
Computes the median time to reach a specified cumulative incidence probability
Supports interpolation for more precise estimates.
}
\details{
The function validates inputs, extracts relevant cumulative incidence data,
and computes the time at which the cumulative incidence reaches the target
probability. If interpolation is enabled, linear interpolation is applied
between adjacent time points.
}
\examples{


cmp_risk_data <- construct_surv_cmprisk_var(cardio_data,
patid = PatientID,
idx_dt = SurgeryDate,
evt_dt = TransplantDate,
end_dt = LastVisitDate,
death_dt = DeathDate,
append = TRUE,
units = "months",
adm_cnr_time = 24)


CIF <- estimate_cif_km(cmp_risk_data, evt = evt,evt_time = evt_time)

median_time_to_event(survfitms_obj = CIF, target_prob= 0.2,evt_type = 1, interpolate = TRUE)

CIF_Sex <- estimate_cif_km(cmp_risk_data , evt = evt,evt_time = evt_time,group = Sex)
median_time_to_event(survfitms_obj = CIF_Sex,subgroup = "Sex=Male",
target_prob= 0.2,evt_type = 1, interpolate = TRUE)
median_time_to_event(survfitms_obj = CIF_Sex,subgroup = "Sex=Female",
target_prob= 0.2,evt_type = 1, interpolate = TRUE)

}
